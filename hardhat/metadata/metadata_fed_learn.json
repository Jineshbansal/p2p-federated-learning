{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"taskId","type":"uint256"},{"indexed":true,"internalType":"address","name":"depositor","type":"address"},{"indexed":false,"internalType":"string","name":"modelHash","type":"string"},{"indexed":false,"internalType":"string","name":"datasetHash","type":"string"},{"indexed":false,"internalType":"uint256","name":"numChunks","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalReward","type":"uint256"}],"name":"TaskCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"taskId","type":"uint256"},{"indexed":true,"internalType":"address","name":"trainer","type":"address"},{"indexed":false,"internalType":"string","name":"weightsHash","type":"string"},{"indexed":false,"internalType":"uint256","name":"rewardAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"remainingChunks","type":"uint256"}],"name":"WeightsSubmitted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"who","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawn","type":"event"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"uint256","name":"taskId","type":"uint256"}],"name":"cancelTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"modelHash","type":"string"},{"internalType":"string","name":"datasetHash","type":"string"},{"internalType":"uint256","name":"numChunks","type":"uint256"}],"name":"createTask","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"}],"name":"hasSubmitted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"pendingWithdrawals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"setPendingWithdrawal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"taskId","type":"uint256"},{"internalType":"string","name":"weightsHash","type":"string"}],"name":"submitWeights","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"taskCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tasks","outputs":[{"internalType":"address payable","name":"depositor","type":"address"},{"internalType":"string","name":"modelHash","type":"string"},{"internalType":"string","name":"datasetHash","type":"string"},{"internalType":"uint256","name":"numChunks","type":"uint256"},{"internalType":"uint256","name":"remainingChunks","type":"uint256"},{"internalType":"uint256","name":"perChunkReward","type":"uint256"},{"internalType":"bool","name":"exists","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawPending","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}],"devdoc":{"events":{"TaskCreated(uint256,address,string,string,uint256,uint256)":{"details":"emitted when a task is created"},"WeightsSubmitted(uint256,address,string,uint256,uint256)":{"details":"emitted when a trainer publishes weights and receives reward (or credited)"},"Withdrawn(address,uint256)":{"details":"emitted when someone withdraws pending balance"}},"kind":"dev","methods":{"cancelTask(uint256)":{"params":{"taskId":"id of the task to cancel"}},"createTask(string,string,uint256)":{"params":{"datasetHash":"IPFS hash of the dataset (string)","modelHash":"IPFS hash of the model (string)","numChunks":"Number of chunks the dataset is divided into (must be > 0) Requirements: msg.value must be > 0 and divisible by numChunks to ensure exact per-chunk reward."}},"submitWeights(uint256,string)":{"params":{"taskId":"The id of the task","weightsHash":"IPFS hash of the published weights"}}},"title":"Federated Training Reward Contract","version":1},"userdoc":{"kind":"user","methods":{"cancelTask(uint256)":{"notice":"Cancel a task and refund remaining funds to depositor. Only allowed if no submissions have happened (i.e., remainingChunks == numChunks). This protects trainers' expectations once submissions begin."},"createTask(string,string,uint256)":{"notice":"Create a new training task and deposit reward funds."},"submitWeights(uint256,string)":{"notice":"Trainer submits final weights (IPFS hash) for a task and claims the per-chunk reward. Each address can only submit once per task. Rewards are paid out immediately if the transfer succeeds, otherwise credited to pendingWithdrawals which can be withdrawn with withdrawPending()."},"withdrawPending()":{"notice":"Withdraw any pending balance credited to the caller (e.g., failed transfers)"}},"notice":"Create a training task by providing IPFS hashes for model & dataset, number of chunks, and depositing reward funds. Trainers publish final weights (IPFS hash) and receive reward = totalDeposit / numChunks per accepted submission.","version":1}},"settings":{"compilationTarget":{"contracts/fed_learn.sol":"FederatedTrainingReward"},"evmVersion":"prague","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":false,"runs":200},"remappings":[]},"sources":{"contracts/fed_learn.sol":{"keccak256":"0x9df59fd566203cef5515ed4ace423cecd59687ad913f101154ded5b39bd10894","license":"MIT","urls":["bzz-raw://f34eac707f775442a4564995eab82a592ff0affdb4581d3e3918a7b82b0ee915","dweb:/ipfs/QmWywXfUamf9b1EniYHyAbZN5zdB2jj2HcvmTa7dUN2QUx"]}},"version":1}